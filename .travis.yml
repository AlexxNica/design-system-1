language: ruby
rvm:
- 2.1
sudo: false
env:
  global:
  - secure: PCrMBXNpBHvhz76XKEK/91DOsbjq2bWbKWOzklfby8amk5Zos8CeMp0ctNtUUYExVk+wHg0zsZ8peudOr+zvKd/2VGzBAS5vyzPnqzS9VkoFzEJHBSQTqZSVg4ds8uHDUtobp9kBGDZrRkGT4504NfE+sBVDgxNpsSAh0UA/2K2ZnQRyx+YPftrz2cVM6S5ZIwybNNLEGsp63NyQVlb9W9M0uHRdY6ESf71LU+c3Ri492cz+NwAWrr6FggeJy6Qhf+egqVO04BU5TBVcHY6ybshb8isfBn8W2WiugBY87CFDNYULausiOCsVdutI4aauKF01iW1ZaMOvGIK4PfWKuFewWOfbEpz4cuNB6PAo5MBPdBzrVjfwxqpy82hT6mt9tVa3oHK/7NmZ0ux4QmT/IDwiuRyy8n96ct6rYkFDEgYyofzziBj4w8YLa26PpT7Wqp9LctESfJw8WQ/DPHi2Jg4F2MIjJCh4lcyB94T46JvdyOh8hN5sneEkDi7Plig65NofgeBrVcgK2Y032s8ViDYp4y6frTVPmqF5APofOE1XfeaWIvZ8xOd1mV2e5iP3+xUwaSw2kHQ5+611UeGj8XfCSYZdCnZh+Ywp/MRfNGFD32uyeEIOwCPsX3ILzcIl4tYDwMHgZXAULTCb7prxZ8M+U71H/s5TeGrMM1LguKs=
  - secure: TYCHZjR2QjGclPd9dMmakzuQexPgb73ryFqtb1rN7d/5CPJl0H6Q+Q6b9YVA9DeVG/7VN4UFdnBP2wudHdB//0k/tT80xmeBxFHhEfRlp+w/JnmIvdsWWXPYyXeQrTZnmTd1R6In4JR9BsJvn1VFQib2s43fsXiOG3LJFzZQaVhLufSsXTXdB7FtrsN7+g/x3MdhLOSxZSNe1a6iyOGU3w5Vjt0egKLVaVhM0WJ8a2ONMxE8xviEbU9ZWmTHdJSTRBGx7TV7bXOwBMBvJLv7/zDJ5M5p/X7HsFW7qXoA/3sAMFormJ5nxkHEGwXJu9YBlQ4yxXBPF8pZ2bOEZkLGK6v95k1P9CUshxUoMh8wnHbK+VzA1O4KwJi6ZphkG3oEHr75GoVsCQ5ep3Gc1BemBLgYDqDA1yctvkw8/87EdAykYahOsk1RipwzYwob1NurWcieG4YttJ7106xbUmzb/6Dg76WdoLOBoQVSCYVn8Y0w8GZXSQVrYsgygeAKiSvG+YYqTjH9tzRdZFLlleED7XUPvH1hhhHBfsDk63ced6IwSN9wNr4gkdAi1mtRLkqFfUZ/QHHh0qSTIMsXfiaSy51RtuyPkBsB7YTJX0bwlG6XEWaiGnysxcmVRjlxqPnC4hc//cZFeJR7K/EGBx5qCLDd169xxiA3NRMcFRaUy/A=
  - secure: E/7xhFgGDR7neiJ8EeAPPjFyz1MBy1skXpG4Od8m/8XbkG/M/IHEgVfupHijgDtab8fVXQhvwCSRkfQPzbnJ+jar3euTwFIJdZbmvZnRmrMqeqtYT0ra4+m7pZ1ML8X57hdAWe7uSL6cTBCSQG0lrRq/Mi6vfUmi+114K7sMSQX5LK2sUG+kd/8NrhYIfv0ce1yMRoLhL3wBg4RrnzK0CLcYTB+uikRKjphGK/6dRYa4mi7cBZrpy8LHJH4AZZZn9XVXTsoRniFDDuW5d30hNF/Sg6csH2dtpxYxlByfGGA1FmKmgyZ+iB+z+TrLo4igcTBiQcxXlhl6Im01KFBsMoS4MOvjWW/i4OiK9ucvsAJbqShoJxSLUzAGSBBOLKJn3s3XfQUCyRagsbetCG59chhvzb/kjmJrEwJ29f2oeSL18slg+eYy9xDYcIIeO6lQEQQQ543kww9JRrJGjC/C6Kd/39sREKtR3ptJ0gMvbsPmSPita5lmQz0s+p2+K30pIrC3eJgOgDNQPS81afkk5AFXq2s653zSlUY1r7tcx6ZTUAKs1pMayzidtRJ8xOhGXXsClXBKyvi5jcvtDqW1uDjRl64nQNYjXglrphf9Js0yzt6VtHCkR+i5USgrcX8RZbivrSnvMhSfOFg2V0ICFCViRFDGrhf0Yb1u4NZgCwc=
  - secure: mDJHjvposhs4K2cRJKgTQpL9eWaBN0B6sb7SDsR9AUMvRNjyPfAwkkMgj79q30aNZntV4XBEemsnT9TzNEWz+/1BDLmb/vz8w5dG0Q4e3tU+POWO95YB/Oyiuajhsevzn4vCI2obgairqM+rUjSJQpg+QB1bVL5hi855fZV6fqEOKe69uI4FyoHuyLV1WRVEd6eXaqYs8N1FaE7LjB/PrvR4p3UaeZdDxqLGXdYWfIRsGJIuagl8jaHXGyebhA+L/0cnLf+vXenU1MdAxGDWXNJV9Kd7vZmfva4N9IW2M0Si3ho4naeJcq/Qr/PqTMe6N1mefJyVj6RlmKAoNgUOfJWu2eNeeocX+tp6V1+isnWA1OkrHDxGs/J3BXwb3hB2EZwdvt191FW0AAIeB4EZE1kqmZeeikwBcQLRZBuiRymu8YBqwLPgzHIBJyUDbs2c9/VEaftcXI7UeLmJk5+PTarAQx1ezRdadwz2efdq5q6C+0KiW345hwKxOuyOR67K9ShSJ9rl4aHj2TvmLVFK5E1R0xDxEw/X0mufjoSp1TnghyOX0OTTbx9NJBQkgRgbEf+taPyoW6/vyfPRx5oscPxvnAJ+Wt9srqUZyz0/lIiKKzMuRkRclKY59JzMDGk162buOUbggNIVjGGKkBR2OtoZaFXy8W3mFX533ToaWEY=
  - secure: SeqOJ4FY2UVjTqPY4sq5VUTy73DKqwiI7tNI76UxS/p50qdONrPPaqQp/oSGsh+/yMlkWmf5tjhDNXeaG8wD/Y7VVqeH3G6NeiCxlhJRvHCzCyb1ph9LhWlatOOICTS0ftqoD+mHowBI1ElI43MaEcXYxjcHFubHUYsdAJaWcreJb79MFnNUmiHDebNHOBGCjFtSe2FRuVt76lMn1OjpGm+EafBjNisKGMn1W+OcVnQaGBqfGLe72eddE4ccJljyvxFt5AxF4DBk9APbx9hno/G1p5IteCDTfFZ81OhSuYdWxoKAP+NHLI6sK+qmgesziHqJvSM4/vC9R6aeen5enOfn9mGvMgSECXWMzp7+DcwmnrMPmBEdddfoYLnKP5Jn2dPbWsUOZFeAacfpJyN7F49he+klyp48ho7L49e5UTNhk1WEncdfuBZjEF6j4JwkWyeuZH2gr69cSu3tkC3ukUz77WAVxvQNG5md8C0VbfFBiAOVo8K2DM5M5gwKDi0+ERk1WeZ/Mo3VFHSvq+fnbwXqiUctUrUd3441wHWyDvhWCPl58+pgQ6uHDKlF/mQFKhO+B+0BFZP8mk6RxhpR0KhL4lWDkULSOggi1E+rjVjj56ekhcLP8Xp0wCuyWdBTm3jx7HMVzpQLomkmRW41LAsAZx52dLLnp1JMIFGaojk=
addons:
  apt:
    packages:
    - sshpass
before_script:
- bundle install
script: bundle exec jekyll build --config _prod-config.yml
after_success:
- mv _site design-system
- tar -czf package.tgz design-system
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "staging" && export SSHPASS=$DEPLOY_PASS
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "staging" && sshpass -e scp -o StrictHostKeyChecking=no package.tgz $DEPLOY_USER@$DEPLOY_STAGING_HOST:$DEPLOY_PATH
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "staging" && sshpass -e ssh $DEPLOY_USER@$DEPLOY_STAGING_HOST $DEPLOY_PATH/deploy-design-system.sh
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "master" && export SSHPASS=$DEPLOY_PASS
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "master" && sshpass -e scp -o StrictHostKeyChecking=no package.tgz $DEPLOY_USER@$DEPLOY_PROD_HOST:$DEPLOY_PATH
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "master" && sshpass -e ssh $DEPLOY_USER@$DEPLOY_PROD_HOST $DEPLOY_PATH/deploy-design-system.sh
notifications:
  slack:
    secure: pnmMkbxQt0rbioJRwL64lGEoryRqWDH0If4oCssVAP6+k+5h3CDMCeINpfkFhG3Oqro0pKVQnFjiXhDGTInFGX2cTjNm6khyOb0E4q1uRbEBJ2P4xWrfnLcjwq8JTszB1P78yXB/NkuWK2ZmTXWjFYw0FtLOgklvNzjARzxGQEzBn6LrcTmWGy/fxq2E0GdGNQ6xPFJt0Eof9+6Z7aoFUGpobZWHneqrR0yGSPO/CLLxB88jWOuMQLwrgGg3Ua/u/HLgNpdq6h5RhVh25PGZa+MB9pdXRRqbR5FuTIA5uxmG0lAemlcynonPDOvh1bUGKh0z0bhUJC54Nufe+pib2s2ySll+R/rHYdqp6qJ9p6VuMjwezdMq8OAmFKPzsA5isVj1MTW4qxja5zfsIWeRE558kHSvlTxu0MwUqdfM8CuBppUfJZ7QQ1lGpaeLsfJfHxbJbvUi6XeNnf+ffoYsCTKKfxA0JzcReLC5cq25nqMxC/dEEH4RY3VC519tdjjZDc+fYA8e2pO6QUbdXsUnnwOXBleKt1n556c7MWguAcaCwnifJrSFHC8GVPX4L61Ta75ul8TcuNQIMkY5DAgsUYg5+OnWfM2bu1p8kiGc8TthVtezJe5AfXxoLQBZQQdtX/uovCVZiUjaafpmapNGcMwhHIDmbPWwM7JdQgs8eH4=
